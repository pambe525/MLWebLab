{% extends 'base.html' %}
{% block home_content %}
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
          integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
          crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
          integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
          crossorigin="anonymous">
  </script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
          integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
          crossorigin="anonymous">
  </script>

  {% load static %}

<!-- File input form  -->
<form action={% url 'index' %} method="POST">
    {% csrf_token %}
    <div class="input-group">
        <div class="input-prepend" >
            <span class="input-group-text pt-1 pb-0">{{ form.data_file.label_tag }}</span>
        </div>
        <div class="input-group-append">{{ form.data_file }}</div>
        <div class="input-group-append">
            <button type="submit" name="select_btn" class="btn" {{select_btn_disabled}}>
                Select
            </button>
            <button type="submit" name="change_btn" class="btn" {{change_btn_disabled}}>
                Change Data File
            </button>
        </div>
    </div>
 </form>
 <h6>{{  post_data }}</h6>
<!-- /File input form  -->

<!-- MLFLowChart -->
<form id="flowchart_form" action={% url 'index' %} method="POST">
{% csrf_token %}
<div id='flow_container' class="{{ flow_chart_visibility }} mt-4">
    <table>
    <tr>
	<!--  Data Source Tile  -->
	<td style="vertical-align: top">
    <div class="card text-center border-dark col-*">
	  <div class="card-header bg-dark text-center h6 text-white font-weight-bold">
	   	<i class="fa fa-database"></i><span class="px-2">DATA SOURCE</span>
	  </div>
	  <div class="card-body">
	    <h6 class="card-title text-left">Data File:</h6>
	    <div class="card-label" name="source_file">
            {{ data_file_name }}
        </div>
	  </div>
      <div class="card-body row">
          <h6 class="card-title text-left pt-1 col-*">Rows:</h6>
          <span class="card-label col" name="source_rows">
              {{ data_file_rows }}
          </span>
          <h6 class="card-title text-left pt-1 col-*">Cols:</h6>
          <span class="card-label col" name="source_cols">
              {{ data_file_cols }}
          </span>
      </div>
  	  <button class="btn m-3" name="explore_btn">Explore Data ...</button>
    </div>    
    </td>
	<!--  /Data Source Tile  -->
	
	<!-- Right arrow -->
	<td>
	<div class="col-* mb-3">
		<img src="{% static 'images/double_arrow_h.png' %}" width="40px"/>
	</div>
	</td>
	<!-- /Right arrow -->

	<!--  Training Set Tile  -->
	<td style="vertical-align: top">
    <div class="card text-center border-dark col-*">
	  <div class="card-header bg-dark text-center h6 text-white font-weight-bold">
	   	<i class="fa fa-tasks"></i><span class="px-2">TRAINING SET</span>
	  </div>
	  <div class="card-body">
	    <h6 class="card-title text-left">Target Feature:</h6>
	    <div class="card-label" name="target_feature">
            {{ target_feature }}
        </div>
	  </div>
 	  <div class="card-body row">
	      <h6 class="card-title pt-1 col-*">Base Features:</h6>
	      <span class="card-label col" name="base_features">
              {{  base_features }}
          </span>
	  </div>
	  <div class="card-body row">
      	  <h6 class="card-title pt-1 col-*">Training Ratio:</h6>
	      <span class="card-label col" name="training_ratio">
              {{ training_ratio }}
          </span>
	  </div>
 	  <div class="card-body row">
	      <h6 class="card-title pt-1 col-*">No. of Data Points:</h6>
	      <span class="card-label col" name="training_rows">
              {{ training_rows }}
          </span>
	  </div>
 	  <button class="btn m-3" name="edit_data_btn">Edit ...</button>
    </div>
    </td>
	<!--  /Training Set Tile  -->
	
	<!-- Right arrow -->
	<td>
	<div class="col-* mb-2">
		<img src="{% static 'images/right_arrow.png' %}" width="40px"/>
	</div>
	</td>
	<!-- /Right arrow -->

	<!--  Method Tile  -->
	<td style="vertical-align: top">
    <div class="card text-center border-dark col-*">
	  <div class="card-header bg-dark text-center h6 text-white font-weight-bold">
	   	<i class="fa fa-cog"></i><span class="px-2">METHOD/ALGORITHM</span>
	  </div>
	  <div class="card-body">
	    <h6 class="card-title text-left">Method:</h6>
	    <div class="card-label" name="training_method">
            {{ training_method }}
        </div>
	  </div>
 	  <button type="submit" class="btn m-2" name="edit_method_btn">Edit...</button>
      <button type="submit" class="btn m-2" name="train_btn">Train</button>
    </div>
    </td>
	<!--  /Method Tile  -->

    <!-- Right arrow -->
	<td>
	<div class="col-* mb-2">
		<img src="{% static 'images/right_arrow.png' %}" width="40px"/>
	</div>
	</td>
	<!-- /Right arrow -->

    <!--  Validation Tile  -->
	<td style="vertical-align: top">
    <div class="card text-center border-dark col-*">
	  <div class="card-header bg-dark text-center h6 text-white font-weight-bold">
	   	<i class="fa fa-clipboard-check"></i><span class="px-2">VALIDATION SET</span>
	  </div>
	  <div class="card-body row">
	      <h6 class="card-title pt-1 col-*">No. of Data Points:</h6>
	      <span class="card-label col" name="validation_rows">
              {{ validation_rows }}
          </span>
	  </div>
	  <div class="card-body row">
	      <h6 class="card-title pt-1 col-*">Accuracy Score:</h6>
	      <span class="card-label col" name="validation_score">
              {{ validation_score }}
          </span>
          <img src="{% static 'images/warning.png' %}" height="25px" id="warning_icon"
               title="Train data to see score" {{ warning_icon_visibility }}/>
          <img src="{% static 'images/check.png' %}" height="25px" id="check_icon" {{ check_icon_visibility }}/>
	  </div>
 	  <button class="btn m-2" name="predict_btn" {{ predict_btn_state }}>Predict...</button>
    </div>
    </td>
	<!--  /Validation Tile  -->
	</tr>
    </table>
</div>
</form>
<!-- /MLFLowChart -->
{% endblock home_content %}

{% block javascript %}
      <script type="text/javascript">
        $(document).ready(function(){
            {% if error_message is not None %} $('#messageBox').modal("show"); {% endif %}
            $("#glass_pane").hide();
            $("#flowchart_form").on('submit', function(data) {
                $("#glass_pane").show();
            })
        })
     </script>
{% endblock javascript %}

